<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Maitree Blog Title Responsive Line Tester (Dark Mode)</title>
  <style>
    @font-face {
      font-family: 'Maitree';
      src: url('Maitree-Bold.woff2') format('truetype');
      font-weight: bold;
      font-style: normal;
    }
    body {
      font-family: Arial, sans-serif;
      background: #121212;
      color: #e0e0e0;
      margin: 0;
      padding: 24px 48px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    h2 {
      margin: 16px 0 20px;
      font-size: 1.5em;
      color: #fff;
    }
    .controls {
      margin-bottom: 12px;
    }
    input {
      font-size: 14px;
      padding: 6px 8px;
      margin-right: 8px;
      width: 70%;
      background: #1e1e1e;
      color: #e0e0e0;
      border: 1px solid #333;
      border-radius: 4px;
    }
    .block {
      background: #1e1e1e;
      border-radius: 8px;
      margin: 16px 0;
      padding: 16px;
    }
    .label {
      font-size: 1em;
      color: #bbb;
      margin-bottom: 6px;
    }
    .maitree {
      font-family: 'Maitree', serif;
      font-weight: bold;
      margin: 0 0 8px;
      line-height: 1.18;
      word-break: break-word;
      white-space: normal;
      color: #e0e0e0;
    }
    #desktop { font-size: 20px; width: 260px; }
    #tablet  { font-size: 18px; width: 224px; }
    #mobile  { font-size: 16px; width: 304px; }
    pre {
      background: #2e2e2e;
      border-radius: 6px;
      padding: 10px;
      margin: 0;
      white-space: pre-wrap;
      font-size: 0.95em;
      color: #e0e0e0;
    }
    /* PASS / FAIL colors */
    .pass { color: #6cc070; font-weight: bold; }
    .fail { color: #e57373; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Maitree Blog Title Responsive Line Tester (Dark Mode)</h2>

  <div class="controls">
    <input id="titleInput" placeholder="Paste your title here" oninput="handleInput()">
  </div>

  <div class="block">
    <div class="label">Desktop (20px, 260px):</div>
    <div id="desktop" class="maitree"></div>
    <pre id="desktopResult"></pre>
  </div>
  <div class="block">
    <div class="label">Tablet (18px, 224px):</div>
    <div id="tablet" class="maitree"></div>
    <pre id="tabletResult"></pre>
  </div>
  <div class="block">
    <div class="label">Mobile (16px, 304px):</div>
    <div id="mobile" class="maitree"></div>
    <pre id="mobileResult"></pre>
  </div>

  <script>
    const BREAKPOINTS = [
      { id: 'desktop', requiredLines: 3, minLast: 180, maxLast: 259.9, width: 260 },
      { id: 'tablet',  requiredLines: 3, minLast: 100, maxLast: 223.9, width: 224 },
      { id: 'mobile',  requiredLines: 2, minLast: 160, maxLast: 303.9, width: 304 }
    ];

    function measureLines(box) {
      const rects = Array.from(box.getClientRects()).filter(r => r.width > 1);
      if (rects.length > 1) {
        return rects.map(r => Math.round(r.width * 100) / 100);
      }
      const tn = Array.from(box.childNodes).find(n => n.nodeType === Node.TEXT_NODE);
      if (!tn) return [];
      const charRects = [];
      const range = document.createRange();
      for (let i = 0; i < tn.length; i++) {
        range.setStart(tn, i);
        range.setEnd(tn, i+1);
        const r = range.getClientRects()[0];
        if (r && r.width > 0) charRects.push({ top: Math.round(r.top), width: r.width });
      }
      if (!charRects.length) return [];
      const lines = [];
      let top = charRects[0].top, sum = 0;
      for (let {top: t, width} of charRects) {
        if (t !== top) {
          lines.push(Math.round(sum * 100) / 100);
          sum = 0; top = t;
        }
        sum += width;
      }
      lines.push(Math.round(sum * 100) / 100);
      return lines;
    }

    function schemaCheck(lineWidths, bp) {
      const fail = msg => `<span class="fail">❌ FAIL</span> <span class="fail">${msg}</span>`;
      const pass = () => `<span class="pass">✅ PASS!</span>`;

      if (lineWidths.length !== bp.requiredLines)
        return fail(`Requires ${bp.requiredLines} lines, found ${lineWidths.length}`);
      for (let w of lineWidths) {
        if (w > bp.width)
          return fail(`A line is ${Math.round(w*100)/100}px (> ${bp.width}px)`);
      }
      const last = lineWidths[lineWidths.length - 1];
      if (last < bp.minLast)
        return fail(`Last line too short: ${Math.round(last*100)/100}px < ${bp.minLast}px`);
      if (last > bp.maxLast)
        return fail(`Last line too long: ${Math.round(last*100)/100}px > ${bp.maxLast}px`);
      return pass();
    }

    function measureAll() {
      const title = document.getElementById('titleInput').value;
      BREAKPOINTS.forEach(bp => {
        document.getElementById(bp.id).textContent = title;
      });
      setTimeout(() => {
        BREAKPOINTS.forEach(bp => {
          const box = document.getElementById(bp.id);
          const lw = measureLines(box);
          let out = lw.map((w,i) => `Line ${i+1}: ${Math.round(w*100)/100}px`).join('\n')
                  + `\nLines: ${lw.length}\n\n`
                  + schemaCheck(lw, bp);
          document.getElementById(bp.id + 'Result').innerHTML = out;
        });
      }, 50);
    }

    let debounceTimer;
    function handleInput() {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(measureAll, 100);
    }
  </script>
</body>
</html>
